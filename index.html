<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="世事一场大梦，人生几度秋凉？夜来风叶已鸣廊。看取眉头鬓上。酒贱常愁客少，月明多被云妨。中秋谁与共孤光。把盏凄然北望。">
  
  <title>
    
    Ilak
  </title>
  <!-- Icon -->
  
    <link rel="shortcut icon" href="/favicon.ico">
    
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Ilak" type="application/atom+xml">
</head>

<body>
  <main class="content">
    <section class="jumbotron">
  <div class="video">
    
    <div class="video-frame">
      <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
    </div>
    
    <div class="video-media">
      <video playsinline="" autoplay="" loop="" muted="" data-autoplay="" poster="/images/ocean/ocean.png"
        x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">Ilak</a></h1>
      <p>于山海间，遇见</p>
      <div><img src="/images/proto.jpg" class="brand" alt="Ilak"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>
<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>
    
    
    <article id="post-golang-fastcache" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/08/14/golang-fastcache/">golang cache</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/08/14/golang-fastcache/" class="article-date">
  <time datetime="2023-08-14T02:10:50.000Z" itemprop="datePublished">2023-08-14</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>cache 选型对比</p>
        
          <p>
            <a class="article-more-link" href="/2023/08/14/golang-fastcache/">
              Read More...
            </a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/08/14/golang-fastcache/" data-id="cllafh66t0000jwnj8ypich3e" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-监控架构思考" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/07/08/%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83/">监控架构思考</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/07/08/%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83/" class="article-date">
  <time datetime="2023-07-08T05:53:09.000Z" itemprop="datePublished">2023-07-08</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/07/08/%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83/" data-id="cllafh66w0001jwnj85l09syk" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-consul-cluster" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/07/05/consul-cluster/">consul cluster</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/07/05/consul-cluster/" class="article-date">
  <time datetime="2023-07-05T05:57:02.000Z" itemprop="datePublished">2023-07-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <h1 id="consul"><a href="#consul" class="headerlink" title="consul"></a>consul</h1><h2 id="consul-agent-register-service"><a href="#consul-agent-register-service" class="headerlink" title="consul agent register service"></a>consul agent register service</h2><p><a target="_blank" rel="noopener" href="https://developer.hashicorp.com/consul/commands/services">https://developer.hashicorp.com/consul/commands/services</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning for Consul operators: The Consul agent persists registered services in the local state directory. If this state directory is deleted or lost, services registered with this command will need to be reregistered.</span><br></pre></td></tr></table></figure>
<h2 id="why-consul-did’t-sync-svc-data"><a href="#why-consul-did’t-sync-svc-data" class="headerlink" title="why consul did’t sync svc data"></a>why consul did’t sync svc data</h2><p><a target="_blank" rel="noopener" href="https://github.com/hashicorp/consul/issues/11438">https://github.com/hashicorp/consul/issues/11438</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">For example, say you have nodes 1 and 2 in your environment, and two services�Cservice A and service B. Service A is deployed on both nodes 1 and 2, and separately registered with each node.</span><br><span class="line"></span><br><span class="line">Service B issues a service discovery query to Consul for service A, and Consul returns the IP/port info of the service running on both node 1 and 2.</span><br><span class="line"></span><br><span class="line">If node 1 goes down, the health check for service instance A on that machine will be marked as failed. As such, Consul&#x27;s catalog will no longer return information for the instance of service A running on node 1. It will only return information about the remaining healthy instance that is registered and still running on node 2.</span><br><span class="line"></span><br><span class="line">In order to have a service be highly available, you need to run the service across multiple nodes, and ensure the service is properly registered with its local node so that the particular service instance is discoverable in the service catalog.</span><br><span class="line"></span><br><span class="line">See Introduction to HashiCorp Consul for a visual explanation of this�Cstarting at the 5min mark through 6:25.</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=mxeMdl0KvBI&t=302s">https://www.youtube.com/watch?v=mxeMdl0KvBI&amp;t=302s</a></p>
<h2 id="how-to-use-consul-cluster"><a href="#how-to-use-consul-cluster" class="headerlink" title="how to use consul cluster"></a>how to use consul cluster</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bluersw/p/11610711.html">https://www.cnblogs.com/bluersw/p/11610711.html</a><br>server test<br><img src="/2023/07/05/consul-cluster/server_test.gif"><br>client test<br><img src="/2023/07/05/consul-cluster/client_test.gif"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/07/05/consul-cluster/" data-id="cljpb70du00007knjgidf9m0k" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-work-schedule" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/05/30/work-schedule/">work_schedule</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/05/30/work-schedule/" class="article-date">
  <time datetime="2023-05-30T05:31:59.000Z" itemprop="datePublished">2023-05-30</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p><img src="/2023/05/30/work-schedule/work_schedule.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/05/30/work-schedule/" data-id="cli9udyl2000084njescvhh3g" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-cpu-mode" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/05/29/cpu-mode/">cpu mode</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/05/29/cpu-mode/" class="article-date">
  <time datetime="2023-05-29T05:45:10.000Z" itemprop="datePublished">2023-05-29</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>时常忘记，记录</p>
        
          <p>
            <a class="article-more-link" href="/2023/05/29/cpu-mode/">
              Read More...
            </a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/05/29/cpu-mode/" data-id="cli8fjl9t0000ksnj2dxag4wc" class="article-share-link">
        Share
      </a>
      
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitor/" rel="tag">monitor</a></li></ul>

    </footer>

  </div>

  

  

</article>
    
    <article id="post-promxy-config" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/05/23/promxy-config/">promxy config</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/05/23/promxy-config/" class="article-date">
  <time datetime="2023-05-23T03:45:17.000Z" itemprop="datePublished">2023-05-23</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>promxy<br>proxy prometheus endpoints as a single server to provide api services<br>use docker hub’s pubilc image<br>github repo : <a target="_blank" rel="noopener" href="https://github.com/jacksontj/promxy">https://github.com/jacksontj/promxy</a></p>
        
          <p>
            <a class="article-more-link" href="/2023/05/23/promxy-config/">
              Read More...
            </a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/05/23/promxy-config/" data-id="clhzrsd8r0000o4nj59mo03ky" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-istio架构图" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/05/22/istio%E6%9E%B6%E6%9E%84%E5%9B%BE/">istio架构图</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/05/22/istio%E6%9E%B6%E6%9E%84%E5%9B%BE/" class="article-date">
  <time datetime="2023-05-22T02:52:52.000Z" itemprop="datePublished">2023-05-22</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p><img src="/2023/05/22/istio%E6%9E%B6%E6%9E%84%E5%9B%BE/arch.svg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/05/22/istio%E6%9E%B6%E6%9E%84%E5%9B%BE/" data-id="clhy9bef50000t8nj93nx31um" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-ansible-服务器-exporter-playbook" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/05/19/ansible-%E6%9C%8D%E5%8A%A1%E5%99%A8-exporter-playbook/">ansible 服务器 exporter playbook</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/05/19/ansible-%E6%9C%8D%E5%8A%A1%E5%99%A8-exporter-playbook/" class="article-date">
  <time datetime="2023-05-19T01:56:27.000Z" itemprop="datePublished">2023-05-19</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>just playbook yaml, no more</p>
        
          <p>
            <a class="article-more-link" href="/2023/05/19/ansible-%E6%9C%8D%E5%8A%A1%E5%99%A8-exporter-playbook/">
              Read More...
            </a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/05/19/ansible-%E6%9C%8D%E5%8A%A1%E5%99%A8-exporter-playbook/" data-id="clhtx698z0000e0nj7m830phn" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-linux-install-docker" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/05/08/linux-install-docker/">linux install docker</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/05/08/linux-install-docker/" class="article-date">
  <time datetime="2023-05-08T05:58:12.000Z" itemprop="datePublished">2023-05-08</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>centos and ubuntu</p>
        
          <p>
            <a class="article-more-link" href="/2023/05/08/linux-install-docker/">
              Read More...
            </a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/05/08/linux-install-docker/" data-id="clhefrd4200001onjcrs7hesh" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-consul迁移" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/04/04/consul%E8%BF%81%E7%A7%BB/">记一次consul迁移</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/04/04/consul%E8%BF%81%E7%A7%BB/" class="article-date">
  <time datetime="2023-04-03T16:31:17.000Z" itemprop="datePublished">2023-04-04</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>原consul集群迁移，需完整还原历史数据的同时更换ip，并升级consul版本。</p>
        
          <p>
            <a class="article-more-link" href="/2023/04/04/consul%E8%BF%81%E7%A7%BB/">
              Read More...
            </a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ilak.website/2023/04/04/consul%E8%BF%81%E7%A7%BB/" data-id="clg4hc1a300045snj18ncc2er" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next</a>
  </nav>
  
</section>
</div>
    <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>Ilak &copy; 2023</li>
      
        <li>
          
            <a href="https://beian.miit.gov.cn/" target="_blank"></a>
            
        </li>
      
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>theme  <a target="_blank" rel="noopener" href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
    <p><ul class="list-inline">
  
  <li><i class="fe fe-bar-chart tooltip" data-tooltip="PV"></i> <span id="busuanzi_value_site_pv"></span></li>
  
  <li><i class="fe fe-smile-alt tooltip" data-tooltip="UV"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul></p>
  </div>
</footer>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/proto.jpg" alt="Ilak"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">文档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="fe fe-feed"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>






<script src="/js/ocean.js"></script>

</body>

</html>